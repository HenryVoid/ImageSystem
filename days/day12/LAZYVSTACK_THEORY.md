# LazyVStack ì‹¬í™” ì´ë¡ 

> LazyVStackì˜ Lazy ë¡œë”© ë©”ì»¤ë‹ˆì¦˜ê³¼ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±ì„ ê¹Šì´ ì´í•´í•©ë‹ˆë‹¤

---

## ğŸ“š ëª©ì°¨

1. [VStack vs LazyVStack](#vstack-vs-lazyvstack)
2. [Lazy ë¡œë”© ë©”ì»¤ë‹ˆì¦˜](#lazy-ë¡œë”©-ë©”ì»¤ë‹ˆì¦˜)
3. [ë·° ì¬ì‚¬ìš© ì›ë¦¬](#ë·°-ì¬ì‚¬ìš©-ì›ë¦¬)
4. [ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±](#ë©”ëª¨ë¦¬-íš¨ìœ¨ì„±)
5. [ì„±ëŠ¥ íŠ¹ì„±](#ì„±ëŠ¥-íŠ¹ì„±)
6. [ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­](#ì‚¬ìš©-ì‹œ-ì£¼ì˜ì‚¬í•­)

---

## VStack vs LazyVStack

### VStack (Eager Loading)

**ë™ì‘ ë°©ì‹**:
```swift
VStack {
    ForEach(0..<1000) { index in
        ImageRow(index: index)
    }
}
```

**ë‚´ë¶€ ë™ì‘**:
1. ForEachê°€ 1000ê°œ ë·° **ëª¨ë‘ ì¦‰ì‹œ ìƒì„±**
2. ê° ë·°ì˜ `body` í”„ë¡œí¼í‹° í‰ê°€
3. ëª¨ë“  ë·° ê³„ì¸µ êµ¬ì¡° ë©”ëª¨ë¦¬ì— ì €ì¥
4. í™”ë©´ì— ë³´ì´ëŠ” ë·°ë§Œ ë Œë”ë§

**ë©”ëª¨ë¦¬ ì‚¬ìš©**:
```
ë·° ê°œìˆ˜: 1000ê°œ
ë·° ë‹¹ ë©”ëª¨ë¦¬: ì•½ 2KB (ë·° êµ¬ì¡°ì²´)
ì´ë¯¸ì§€ ë‹¹ ë©”ëª¨ë¦¬: ì•½ 2MB (ë””ì½”ë”©ëœ ì´ë¯¸ì§€)
---
ì´ ë©”ëª¨ë¦¬: 1000 Ã— 2MB = 2GB ğŸ’¥
```

**ë¬¸ì œì **:
- âŒ ì´ˆê¸° ë¡œë”© ì‹œê°„ì´ ë§¤ìš° ê¹€
- âŒ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì—„ì²­ë‚¨
- âŒ ìŠ¤í¬ë¡¤ ì„±ëŠ¥ ì €í•˜
- âŒ ì•± í¬ë˜ì‹œ ê°€ëŠ¥ì„±

---

### LazyVStack (Lazy Loading)

**ë™ì‘ ë°©ì‹**:
```swift
LazyVStack {
    ForEach(0..<1000) { index in
        ImageRow(index: index)
    }
}
```

**ë‚´ë¶€ ë™ì‘**:
1. ForEachëŠ” ë°ì´í„° ë²”ìœ„ë§Œ ì €ì¥ (1000ê°œ ì¸ë±ìŠ¤)
2. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ì— ë”°ë¼ **í•„ìš”í•œ ë·°ë§Œ ìƒì„±**
3. í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°„ ë·°ëŠ” **ìë™ ì œê±°**
4. ë‹¤ì‹œ ë‚˜íƒ€ë‚  ë•Œ **ì¬ìƒì„±**

**ë©”ëª¨ë¦¬ ì‚¬ìš©**:
```
í™”ë©´ì— ë³´ì´ëŠ” ë·°: ì•½ 10ê°œ
ë·° ë‹¹ ë©”ëª¨ë¦¬: ì•½ 2KB
ì´ë¯¸ì§€ ë‹¹ ë©”ëª¨ë¦¬: ì•½ 2MB
---
ì´ ë©”ëª¨ë¦¬: 10 Ã— 2MB = 20MB âœ…
```

**ì¥ì **:
- âœ… ì´ˆê¸° ë¡œë”©ì´ ë¹ ë¦„ (10ê°œë§Œ ìƒì„±)
- âœ… ë©”ëª¨ë¦¬ íš¨ìœ¨ì  (90% ì ˆê°)
- âœ… ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
- âœ… ì•ˆì •ì  (ë©”ëª¨ë¦¬ í•œê³„ ì•ˆì „)

---

## Lazy ë¡œë”© ë©”ì»¤ë‹ˆì¦˜

### 1. ë·° ìƒì„± íƒ€ì´ë°

```
ìŠ¤í¬ë¡¤ ì „:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Screen    â”‚ â† í™”ë©´ì— ë³´ì´ëŠ” ì˜ì—­
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [View 1]   â”‚ âœ… ìƒì„±ë¨
â”‚  [View 2]   â”‚ âœ… ìƒì„±ë¨
â”‚  [View 3]   â”‚ âœ… ìƒì„±ë¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   View 4       â¸ï¸ ì•„ì§ ìƒì„± ì•ˆë¨
   View 5       â¸ï¸ ì•„ì§ ìƒì„± ì•ˆë¨
   ...

ìŠ¤í¬ë¡¤ í›„:
   View 1       ğŸ—‘ï¸ ì œê±°ë¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Screen    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [View 2]   â”‚ âœ… ìœ ì§€ë¨
â”‚  [View 3]   â”‚ âœ… ìœ ì§€ë¨
â”‚  [View 4]   â”‚ âœ… ìƒˆë¡œ ìƒì„±ë¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   View 5       â¸ï¸ ëŒ€ê¸° ì¤‘
   ...
```

### 2. ë·° ìƒëª…ì£¼ê¸°

```swift
struct ImageRow: View {
    let index: Int
    
    var body: some View {
        // âš ï¸ LazyVStackì—ì„œ ì´ bodyëŠ” í™”ë©´ì— ë³´ì¼ ë•Œë§Œ í˜¸ì¶œë¨
        AsyncImage(url: imageURL(index))
            .onAppear {
                print("View \(index) appeared")
                // âœ… í™”ë©´ì— ë‚˜íƒ€ë‚¨
            }
            .onDisappear {
                print("View \(index) disappeared")
                // âœ… í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê° (ë·° ì œê±°)
            }
    }
}
```

**LazyVStack ìƒëª…ì£¼ê¸°**:
```
1. ìŠ¤í¬ë¡¤ë¡œ ë·°ê°€ ë³´ì´ë ¤ê³  í•¨
   â†“
2. SwiftUIê°€ body í‰ê°€ (ë·° ìƒì„±)
   â†“
3. onAppear í˜¸ì¶œ
   â†“
4. ë Œë”ë§ (í™”ë©´ì— í‘œì‹œ)
   â†“
5. ìŠ¤í¬ë¡¤ë¡œ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°
   â†“
6. onDisappear í˜¸ì¶œ
   â†“
7. ë·° ë©”ëª¨ë¦¬ì—ì„œ ì œê±° ğŸ—‘ï¸
```

### 3. ë²„í¼ë§ ì „ëµ

SwiftUIëŠ” ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ì„ ìœ„í•´ **ë²„í¼ë§**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```
í™”ë©´ ì˜ì—­:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚ â† ìœ„ìª½ ë²„í¼ (1-2ê°œ ë·°)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Screen    â”‚ â† ì‹¤ì œ í™”ë©´ (8-10ê°œ ë·°)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚ â† ì•„ë˜ìª½ ë²„í¼ (1-2ê°œ ë·°)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì´ ìƒì„± ë·°: 10-14ê°œ
ì‹¤ì œ ë³´ì´ëŠ” ë·°: 8-10ê°œ
ë²„í¼ ë·°: 2-4ê°œ (ìŠ¤í¬ë¡¤ ëŒ€ë¹„)
```

**ë²„í¼ì˜ ì—­í• **:
- ìŠ¤í¬ë¡¤ì´ ì‹œì‘ë˜ë©´ ì¦‰ì‹œ í‘œì‹œ
- ë·° ìƒì„± ì§€ì—° ìµœì†Œí™”
- ë¶€ë“œëŸ¬ìš´ ì‚¬ìš©ì ê²½í—˜

---

## ë·° ì¬ì‚¬ìš© ì›ë¦¬

### ë·° ì¬ì‚¬ìš© vs ì¬ìƒì„±

**ì˜¤í•´**:
ë§ì€ ì‚¬ëŒë“¤ì´ LazyVStackì´ UITableViewì²˜ëŸ¼ ë·°ë¥¼ **ì¬ì‚¬ìš©**í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

**ì‹¤ì œ**:
LazyVStackì€ ë·°ë¥¼ **ì¬ìƒì„±**í•©ë‹ˆë‹¤. ì¬ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!

```swift
// âŒ ì˜ëª»ëœ ì´í•´
// "View 1ì´ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´, ê·¸ ë·°ë¥¼ View 10ì— ì¬ì‚¬ìš©í•œë‹¤"

// âœ… ì˜¬ë°”ë¥¸ ì´í•´
// "View 1ì´ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´ ì œê±°í•˜ê³ ,
//  View 10ì´ í•„ìš”í•  ë•Œ ìƒˆë¡œ ìƒì„±í•œë‹¤"
```

### ì¬ìƒì„±ì˜ íš¨ìœ¨ì„±

**ì™œ ì¬ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ê°€?**

SwiftUIì˜ ë·°ëŠ” **ê°’ íƒ€ì… (struct)**ì…ë‹ˆë‹¤:
- ê°€ë³ê³  ë¹ ë¦„ (ìŠ¤íƒ ë©”ëª¨ë¦¬)
- ì¬ìƒì„± ë¹„ìš©ì´ ë§¤ìš° ë‚®ìŒ
- ìƒíƒœ ê´€ë¦¬ê°€ ê°„ë‹¨í•¨

```swift
struct ImageRow: View {
    // structëŠ” ì‘ì€ ë©”ëª¨ë¦¬ (ìˆ˜ ë°”ì´íŠ¸)
    let index: Int
    
    var body: some View {
        // body ì¬í‰ê°€ë„ ë¹ ë¦„ (ê°’ íƒ€ì…)
        AsyncImage(url: imageURL(index))
    }
}
```

**ì¬ìƒì„± ë¹„ìš©**:
- ë·° struct ìƒì„±: **~1Î¼s** (ë§ˆì´í¬ë¡œì´ˆ)
- body í‰ê°€: **~10Î¼s**
- ì´ ë¹„ìš©: **ë§¤ìš° ë‚®ìŒ** âœ…

### UITableViewì™€ ë¹„êµ

| íŠ¹ì„± | UITableView | LazyVStack |
|------|-------------|------------|
| **ë·° íƒ€ì…** | í´ë˜ìŠ¤ (UITableViewCell) | êµ¬ì¡°ì²´ (View) |
| **ì¬ì‚¬ìš©** | ì¬ì‚¬ìš© (dequeueReusableCell) | ì¬ìƒì„± |
| **ìƒì„± ë¹„ìš©** | ë†’ìŒ (í´ë˜ìŠ¤ í• ë‹¹) | ë‚®ìŒ (ìŠ¤íƒ ë©”ëª¨ë¦¬) |
| **ìƒíƒœ ê´€ë¦¬** | ë³µì¡ (ì¬ì‚¬ìš© ì‹œ ë¦¬ì…‹) | ê°„ë‹¨ (í•­ìƒ ìƒˆ ë·°) |
| **ë©”ëª¨ë¦¬** | ì¬ì‚¬ìš© í’€ ìœ ì§€ | í•„ìš” ì‹œì—ë§Œ ìƒì„± |

---

## ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±

### 1. ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´

#### VStack (Eager)
```
ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
     â”‚
2GB  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
     â”‚ â–ˆ                              â–ˆ
1GB  â”‚ â–ˆ  ëª¨ë“  ë·°ê°€ ë©”ëª¨ë¦¬ì— ì¡´ì¬      â–ˆ
     â”‚ â–ˆ                              â–ˆ
0    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ì‹œì‘                           ì¢…ë£Œ
```

#### LazyVStack (Lazy)
```
ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
     â”‚     â–²                    â–²
200MBâ”‚    â–ˆâ–ˆâ–ˆ                  â–ˆâ–ˆâ–ˆ
     â”‚   â–ˆâ–ˆ â–ˆâ–ˆ                â–ˆâ–ˆ â–ˆâ–ˆ
100MBâ”‚  â–ˆâ–ˆ   â–ˆâ–ˆ    ìŠ¤í¬ë¡¤    â–ˆâ–ˆ   â–ˆâ–ˆ
     â”‚ â–ˆâ–ˆ     â–ˆâ–ˆ            â–ˆâ–ˆ     â–ˆâ–ˆ
0    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ì‹œì‘  ì¤‘ê°„â‚  ì¤‘ê°„â‚‚  ì¤‘ê°„â‚ƒ    ë

í™”ë©´ì— ë³´ì´ëŠ” ë·°ë§Œ ë©”ëª¨ë¦¬ì— ìœ ì§€
```

### 2. ë©”ëª¨ë¦¬ ì¸¡ì • ì˜ˆì‹œ

**í…ŒìŠ¤íŠ¸ ì¡°ê±´**:
- ì´ë¯¸ì§€: 400Ã—400 JPEG
- ì´ë¯¸ì§€ ë‹¹ ë©”ëª¨ë¦¬: ì•½ 2MB
- ë¦¬ìŠ¤íŠ¸ ê¸¸ì´: 1000ê°œ

**VStack ê²°ê³¼**:
```
ì´ˆê¸° ë©”ëª¨ë¦¬: 80MB
ë¡œë”© í›„ ë©”ëª¨ë¦¬: 2080MB (2GB)
í”¼í¬ ë©”ëª¨ë¦¬: 2150MB
---
ğŸ’¥ ë©”ëª¨ë¦¬ ê²½ê³  ë°œìƒ
ğŸ’¥ ì•± í¬ë˜ì‹œ ê°€ëŠ¥
```

**LazyVStack ê²°ê³¼**:
```
ì´ˆê¸° ë©”ëª¨ë¦¬: 80MB
ë¡œë”© í›„ ë©”ëª¨ë¦¬: 100MB
í”¼í¬ ë©”ëª¨ë¦¬: 180MB (ìŠ¤í¬ë¡¤ ì¤‘)
---
âœ… ì•ˆì •ì  ë™ì‘
âœ… ë©”ëª¨ë¦¬ íš¨ìœ¨ 95% ê°œì„ 
```

### 3. ì´ë¯¸ì§€ ë©”ëª¨ë¦¬ ê´€ë¦¬

AsyncImageëŠ” ë³„ë„ë¡œ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:

```swift
LazyVStack {
    ForEach(0..<1000) { index in
        AsyncImage(url: imageURL(index))
            // âš ï¸ ê° ì´ë¯¸ì§€ëŠ” ë””ì½”ë”©ë˜ì–´ ë©”ëª¨ë¦¬ì— ì €ì¥
    }
}
```

**ë©”ëª¨ë¦¬ êµ¬ì„±**:
```
ì´ ë©”ëª¨ë¦¬: 180MB
â”œâ”€ ì•± ë² ì´ìŠ¤: 80MB
â”œâ”€ ë·° êµ¬ì¡°: 0.02MB (10ê°œ ë·° Ã— 2KB)
â””â”€ ì´ë¯¸ì§€: 100MB (í™”ë©´ ë‚´ ì´ë¯¸ì§€ ë²„í¼)
    â”œâ”€ í™”ë©´ì— ë³´ì´ëŠ” ì´ë¯¸ì§€: 20MB (10ê°œ)
    â””â”€ URLCache: 80MB (ìºì‹œëœ ì´ë¯¸ì§€)
```

---

## ì„±ëŠ¥ íŠ¹ì„±

### 1. ì´ˆê¸° ë¡œë”© ì‹œê°„

**VStack**:
```
1000ê°œ ë·° ìƒì„± ì‹œê°„:
- ë·° ìƒì„±: 1000 Ã— 10Î¼s = 10ms
- body í‰ê°€: 1000 Ã— 50Î¼s = 50ms
- ë ˆì´ì•„ì›ƒ: 1000 Ã— 20Î¼s = 20ms
---
ì´ ì‹œê°„: ~80ms (ëŠë¦¼) âš ï¸
```

**LazyVStack**:
```
10ê°œ ë·°ë§Œ ìƒì„±:
- ë·° ìƒì„±: 10 Ã— 10Î¼s = 0.1ms
- body í‰ê°€: 10 Ã— 50Î¼s = 0.5ms
- ë ˆì´ì•„ì›ƒ: 10 Ã— 20Î¼s = 0.2ms
---
ì´ ì‹œê°„: ~0.8ms (ë¹ ë¦„) âœ…
```

**ë¹„êµ**: LazyVStackì´ **100ë°° ë¹ ë¦„**

### 2. ìŠ¤í¬ë¡¤ ì„±ëŠ¥

#### VStack
```
ìŠ¤í¬ë¡¤ ì‹œ:
- ëª¨ë“  ë·°ê°€ ì´ë¯¸ ì¡´ì¬
- ë ˆì´ì•„ì›ƒë§Œ ì—…ë°ì´íŠ¸
- ê·¸ëŸ¬ë‚˜ ë©”ëª¨ë¦¬ ì••ë°•ìœ¼ë¡œ ëŠë ¤ì§
---
FPS: 30-45 (ëŠê¹€) âš ï¸
```

#### LazyVStack
```
ìŠ¤í¬ë¡¤ ì‹œ:
- ìƒˆë¡œìš´ ë·° ìƒì„± (~1ms)
- ì´ì „ ë·° ì œê±° (~0.1ms)
- ë©”ëª¨ë¦¬ íš¨ìœ¨ì 
---
FPS: 55-60 (ë¶€ë“œëŸ¬ì›€) âœ…
```

### 3. í”„ë ˆì„ íƒ€ì„ ë¶„ì„

**ëª©í‘œ**: 60fps = 16.67ms per frame

**LazyVStack í”„ë ˆì„ íƒ€ì„**:
```
í”„ë ˆì„ 1 (ìŠ¤í¬ë¡¤ ì‹œì‘):
â”œâ”€ ë·° ìƒì„±: 1ms
â”œâ”€ ë ˆì´ì•„ì›ƒ: 3ms
â”œâ”€ ì´ë¯¸ì§€ ë””ì½”ë”©: 8ms
â””â”€ ë Œë”ë§: 2ms
---
ì´: 14ms âœ… (60fps ìœ ì§€)

í”„ë ˆì„ 2 (ê³„ì† ìŠ¤í¬ë¡¤):
â”œâ”€ ë·° ìƒì„±: 1ms
â”œâ”€ ë ˆì´ì•„ì›ƒ: 3ms
â”œâ”€ ì´ë¯¸ì§€ ë””ì½”ë”©: 7ms (ìºì‹œ íˆíŠ¸)
â””â”€ ë Œë”ë§: 2ms
---
ì´: 13ms âœ… (60fps ìœ ì§€)
```

---

## ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

### 1. onAppearì˜ í•¨ì •

```swift
// âš ï¸ ì£¼ì˜: onAppearê°€ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ìˆ˜ ìˆìŒ
LazyVStack {
    ForEach(items) { item in
        ItemView(item)
            .onAppear {
                // ë·°ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œë§ˆë‹¤ í˜¸ì¶œë¨
                // ìŠ¤í¬ë¡¤ë¡œ ë‹¤ì‹œ ëŒì•„ì˜¤ë©´ ë˜ í˜¸ì¶œë¨!
                loadMoreData() // âš ï¸ ì¤‘ë³µ ë¡œë”© ê°€ëŠ¥
            }
    }
}

// âœ… í•´ê²°: ë¡œë”© ìƒíƒœ ì²´í¬
.onAppear {
    guard !isLoading else { return }
    loadMoreData()
}
```

### 2. ìƒíƒœ ë³´ì¡´

```swift
struct ImageRow: View {
    @State private var isLiked = false // âš ï¸ ë·°ê°€ ì¬ìƒì„±ë˜ë©´ ë¦¬ì…‹ë¨!
    
    var body: some View {
        AsyncImage(url: imageURL)
            .overlay(
                Button {
                    isLiked.toggle()
                } label: {
                    Image(systemName: isLiked ? "heart.fill" : "heart")
                }
            )
    }
}

// âœ… í•´ê²°: ìƒìœ„ ë·°ë‚˜ ëª¨ë¸ì— ìƒíƒœ ì €ì¥
class ImageListViewModel: ObservableObject {
    @Published var likedImages: Set<Int> = []
}
```

### 3. ë ˆì´ì•„ì›ƒ ì í”„

```swift
// âš ï¸ ë¬¸ì œ: ë†’ì´ê°€ ê³ ì •ë˜ì§€ ì•Šìœ¼ë©´ ìŠ¤í¬ë¡¤ ì í”„ ë°œìƒ
LazyVStack {
    ForEach(items) { item in
        AsyncImage(url: item.imageURL)
            // ì´ë¯¸ì§€ ë¡œë“œ ì „: ë†’ì´ 0
            // ì´ë¯¸ì§€ ë¡œë“œ í›„: ë†’ì´ 400
            // â†’ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°€ ê°‘ìê¸° ë³€í•¨ âš ï¸
    }
}

// âœ… í•´ê²°: ê³ ì • ë†’ì´ ë˜ëŠ” í”Œë ˆì´ìŠ¤í™€ë”
LazyVStack {
    ForEach(items) { item in
        AsyncImage(url: item.imageURL) { phase in
            switch phase {
            case .empty:
                Color.gray.frame(height: 400) // í”Œë ˆì´ìŠ¤í™€ë”
            case .success(let image):
                image.resizable().frame(height: 400)
            case .failure:
                Color.red.frame(height: 400)
            @unknown default:
                EmptyView()
            }
        }
    }
}
```

### 4. ê³¼ë„í•œ Lazy ì‚¬ìš©

```swift
// âŒ ë„ˆë¬´ ë§ì€ LazyëŠ” ì˜¤íˆë ¤ ë¹„íš¨ìœ¨ì 
LazyVStack {
    ForEach(0..<10) { _ in // 10ê°œë§Œ ìˆìŒ
        LazyHStack { // ë¶ˆí•„ìš”í•œ Lazy
            ForEach(0..<5) { _ in // 5ê°œë§Œ ìˆìŒ
                Text("Item")
            }
        }
    }
}

// âœ… ì ì ˆí•œ ì‚¬ìš©
LazyVStack {
    ForEach(0..<1000) { _ in // ë§ì€ ì•„ì´í…œ â†’ Lazy í•„ìš”
        HStack { // ì ì€ ì•„ì´í…œ â†’ ì¼ë°˜ HStack
            ForEach(0..<3) { _ in
                Text("Item")
            }
        }
    }
}
```

### 5. ì„±ëŠ¥ ì¸¡ì •

í•­ìƒ Instrumentsë¡œ ì‹¤ì œ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ì„¸ìš”:

```bash
# Time Profilerë¡œ í”„ë ˆì„ íƒ€ì„ ì¸¡ì •
Xcode â†’ Product â†’ Profile (âŒ˜I) â†’ Time Profiler

# Allocationsë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸
Instruments â†’ Allocations

# ëª©í‘œ:
- í”„ë ˆì„ íƒ€ì„: < 16.67ms (60fps)
- ë©”ëª¨ë¦¬: ì•± ì „ì²´ < 500MB
- ë©”ëª¨ë¦¬ ì¦ê°€ìœ¨: ìŠ¤í¬ë¡¤ ì‹œ ì•ˆì •ì 
```

---

## ğŸ’¡ í•µì‹¬ ì •ë¦¬

### LazyVStackì„ ì‚¬ìš©í•´ì•¼ í•  ë•Œ

âœ… **ì‚¬ìš©**:
- 100ê°œ ì´ìƒì˜ ì•„ì´í…œ
- ê° ë·°ê°€ ë¬´ê±°ì›€ (ì´ë¯¸ì§€, ë³µì¡í•œ ë ˆì´ì•„ì›ƒ)
- ë¬´í•œ ìŠ¤í¬ë¡¤
- ë©”ëª¨ë¦¬ íš¨ìœ¨ì´ ì¤‘ìš”

âŒ **ë¶ˆí•„ìš”**:
- 10ê°œ ì´í•˜ì˜ ì•„ì´í…œ
- ê°€ë²¼ìš´ ë·° (Text, Icon)
- ëª¨ë“  ë·°ê°€ í•­ìƒ ë³´ì—¬ì•¼ í•¨
- ì´ˆê¸° ë¡œë”©ì´ ì¤‘ìš”

### ì„±ëŠ¥ ë¹„êµ

| ë©”íŠ¸ë¦­ | VStack | LazyVStack | ê°œì„  |
|--------|--------|------------|------|
| **ì´ˆê¸° ë¡œë”©** | 80ms | 0.8ms | 100ë°° âš¡ |
| **ë©”ëª¨ë¦¬** | 2GB | 180MB | 91% â¬‡ï¸ |
| **FPS** | 30-45 | 55-60 | 30% â¬†ï¸ |
| **ì•ˆì •ì„±** | í¬ë˜ì‹œ ìœ„í—˜ | ì•ˆì • | âœ… |

### Best Practices

1. **ëŒ€ê·œëª¨ ë¦¬ìŠ¤íŠ¸ì—ëŠ” í•­ìƒ Lazy ì‚¬ìš©**
2. **ê³ ì • ë†’ì´ ì„¤ì •ìœ¼ë¡œ ë ˆì´ì•„ì›ƒ ì•ˆì •í™”**
3. **onAppear ì¤‘ë³µ í˜¸ì¶œ ë°©ì§€**
4. **ìƒíƒœëŠ” ìƒìœ„ ë·°ì— ì €ì¥**
5. **Instrumentsë¡œ ì„±ëŠ¥ ê²€ì¦**

---

**LazyVStack = ë©”ëª¨ë¦¬ íš¨ìœ¨ + ì„±ëŠ¥ ìµœì í™”ì˜ í•µì‹¬!** ğŸš€


