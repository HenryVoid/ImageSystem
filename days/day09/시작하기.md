# 시작하기

> Day 9 SDWebImage / Kingfisher / Nuke 비교 빠른 시작 가이드

---

## 🚀 빠른 시작

### 1. 프로젝트 열기

```bash
cd /Users/woogi/Documents/ImageSystem/days/day09
open day09.xcodeproj
```

### 2. 패키지 다운로드 대기

첫 빌드 시 Xcode가 자동으로 SPM 패키지를 다운로드합니다:
- SDWebImage
- Kingfisher
- Nuke

**참고**: 패키지 다운로드는 1-2분 소요될 수 있습니다.

### 3. 빌드 및 실행

```
⌘R (Run)
```

### 4. 네트워크 연결 확인

⚠️ **중요**: 이 프로젝트는 인터넷 연결이 필요합니다.

- Wi-Fi 또는 LTE 연결 확인
- 무료 이미지 API 사용: [Picsum Photos](https://picsum.photos)
- 예상 데이터 사용량: 약 2-3MB

---

## 📱 앱 사용 방법

### Tab 1: SDWebImage 데모

**목적**: SDWebImage의 기본 사용법과 성능 확인

1. "이미지 로드" 버튼 클릭
2. 로딩 인디케이터 및 프로그레스 바 확인
3. 로딩 시간, 메모리 사용량 확인
4. "다시 로드" 버튼으로 캐시 히트 테스트
5. "캐시 초기화" 후 재테스트

**측정 항목**:
- 로딩 시간 (첫 로드 vs 캐시)
- 메모리 사용량
- 캐시 히트 여부
- 디스크 캐시 크기

**특징**:
- 프로그레시브 로딩 지원
- UIKit 최적화
- 다양한 이미지 포맷 지원

---

### Tab 2: Kingfisher 데모

**목적**: Kingfisher의 SwiftUI 통합과 API 체험

1. "이미지 로드" 버튼 클릭
2. 체이닝 API를 활용한 옵션 설정 확인
3. 다운샘플링 데모 실행
4. 성능 메트릭 확인
5. "캐시 초기화" 후 재테스트

**측정 항목**:
- 로딩 시간
- 메모리 사용량
- 다운샘플링 효과
- 캐시 효율

**특징**:
- Swift 네이티브
- SwiftUI Modifier 지원
- 깔끔한 체이닝 API

---

### Tab 3: Nuke 데모

**목적**: Nuke의 고성능 파이프라인과 최적화 기법

1. "이미지 로드" 버튼 클릭
2. 파이프라인 커스터마이징 옵션 확인
3. 프리로딩 데모 실행
4. 성능 메트릭 확인
5. "캐시 초기화" 후 재테스트

**측정 항목**:
- 로딩 시간
- 메모리 효율
- 프리로딩 효과
- 파이프라인 성능

**특징**:
- 최고 수준 성능
- 이미지 파이프라인 아키텍처
- 메모리 최적화

---

### Tab 4: 비교 (핵심!)

**목적**: 3개 라이브러리를 동시에 비교하여 차이점 확인

1. "전체 벤치마크" 버튼 클릭
2. 진행 상황 확인 (10개 이미지 로딩)
3. 결과 테이블에서 성능 비교
4. "2차 테스트" 버튼으로 캐시 효과 비교
5. "상세 분석" 버튼으로 종합 결과 확인

**비교 항목**:

| 항목 | 설명 | 중요도 |
|------|------|-------|
| 첫 로드 시간 | 네트워크에서 처음 다운로드 | ⭐⭐⭐ |
| 재로드 시간 | 캐시에서 로드 | ⭐⭐⭐⭐⭐ |
| 메모리 사용량 | 런타임 메모리 | ⭐⭐⭐⭐ |
| 디스크 캐시 | 저장 공간 효율 | ⭐⭐⭐ |
| 리사이징 속도 | 이미지 변환 성능 | ⭐⭐⭐⭐ |

**결과 해석**:
- **녹색**: 최고 성능
- **노란색**: 중간 성능
- **빨간색**: 상대적으로 낮은 성능

---

## 📖 학습 순서 (권장)

### 1단계: 이론 학습 (1시간)

먼저 이론 문서를 순서대로 읽어보세요:

1. **SDWEBIMAGE_GUIDE.md** (20분)
   - 역사와 아키텍처
   - UIKit 통합
   - 캐싱 전략
   - 기본 사용법

2. **KINGFISHER_GUIDE.md** (20분)
   - Swift 네이티브 설계
   - SwiftUI 통합
   - Modifier 체이닝
   - 다운샘플링

3. **NUKE_GUIDE.md** (20분)
   - 이미지 파이프라인
   - 성능 최적화
   - 프리로딩
   - 커스터마이징

4. **LIBRARY_COMPARISON.md** (10분)
   - 아키텍처 비교
   - API 설계 차이
   - 선택 기준

5. **PERFORMANCE_ANALYSIS.md** (10분)
   - 벤치마크 방법론
   - 실측 결과
   - 해석 방법

---

### 2단계: 개별 실습 (1시간)

각 라이브러리를 하나씩 체험:

**Tab 1 실습** (20분):
- SDWebImage 기본 로딩
- 프로그레시브 로딩 확인
- 캐시 동작 테스트
- 성능 메트릭 관찰

**Tab 2 실습** (20분):
- Kingfisher 체이닝 API 체험
- SwiftUI Modifier 활용
- 다운샘플링 효과 확인
- Kingfisher vs SDWebImage 비교

**Tab 3 실습** (20분):
- Nuke 파이프라인 이해
- 프리로딩 데모
- 성능 차이 체감
- Nuke vs 다른 라이브러리 비교

---

### 3단계: 비교 분석 (30분)

**Tab 4에서 종합 비교**:

1. **첫 테스트** (10분)
   - "전체 벤치마크" 실행
   - 첫 로드 시간 비교
   - 메모리 사용량 비교

2. **재테스트** (10분)
   - "2차 테스트" 실행
   - 캐시 히트 시간 비교
   - 캐시 효율 비교

3. **분석** (10분)
   - 결과 테이블 분석
   - 차이의 원인 파악
   - 자신의 프로젝트에 적용할 라이브러리 결정

---

### 4단계: 코드 분석 (1시간)

코드를 직접 읽고 이해:

**Core/ 모듈** (30분):

1. `PerformanceMetrics.swift` (5분)
   - 성능 데이터 모델 이해

2. `SDWebImageLoader.swift` (10분)
   - SDWebImage 래퍼 구현
   - 메트릭 수집 방법

3. `KingfisherLoader.swift` (10분)
   - Kingfisher 래퍼 구현
   - 체이닝 API 활용

4. `NukeLoader.swift` (10분)
   - Nuke 래퍼 구현
   - 파이프라인 활용

**Views/ 모듈** (20분):

1. `SDWebImageView.swift` (5분)
2. `KingfisherView.swift` (5분)
3. `NukeView.swift` (5분)
4. `ComparisonView.swift` (5분)

**tool/ 모듈** (10분):

1. `DiskCacheMonitor.swift`
2. `ImageTransformBenchmark.swift`

---

## 🔧 프로젝트 설정

### 최소 요구사항

- **Xcode**: 14.0+
- **iOS Deployment Target**: 15.0+
- **Swift**: 5.5+
- **인터넷 연결**: 필수

### 의존성 (SPM 자동 설치)

- **SDWebImage**: 5.x
- **Kingfisher**: 7.x
- **Nuke**: 12.x

---

## 🐛 문제 해결

### 패키지를 다운로드할 수 없음

**증상**: "Failed to resolve package dependencies"

**해결**:
1. Xcode 재시작
2. File > Packages > Reset Package Caches
3. 인터넷 연결 확인
4. 프록시 설정 확인

---

### 이미지가 로드되지 않음

**증상**: 계속 로딩 중이거나 에러 표시

**원인 1**: 인터넷 연결 끊김
- **해결**: Wi-Fi 연결 확인

**원인 2**: API 서버 문제
- **해결**: Safari에서 URL 직접 접속
  ```
  https://picsum.photos/800/600
  ```

**원인 3**: 시뮬레이터 네트워크 문제
- **해결**: 시뮬레이터 재시작

---

### 빌드 에러

**증상**: "Cannot find 'SDWebImage' in scope"

**해결**:
1. File > Packages > Resolve Package Versions
2. Clean Build Folder (⇧⌘K)
3. 빌드 재시도 (⌘B)

---

### 앱이 느리거나 멈춤

**증상**: UI가 응답 없음

**원인**: 메모리 부족
- **해결**: 시뮬레이터 재시작 또는 실제 기기 사용

---

### 비교 결과가 이상함

**증상**: 모든 라이브러리가 비슷한 성능

**원인**: 시뮬레이터는 Mac 네트워크 사용
- **해결**: 실제 기기에서 테스트
  - iPhone/iPad 연결
  - ⌘R로 실행
  - 4G/5G 또는 느린 Wi-Fi에서 테스트

---

## 💡 실전 팁

### 1. 네트워크 속도 시뮬레이션

느린 네트워크에서 테스트하면 차이가 더 명확:

1. Settings > Developer > Network Link Conditioner
2. **Enable** 체크
3. Profile 선택:
   - **3G**: 느린 네트워크
   - **LTE**: 보통 네트워크
   - **WiFi**: 빠른 네트워크

**효과**: 라이브러리별 최적화 차이 명확히 확인

---

### 2. Instruments로 심화 분석

**Memory Graph** (메모리 사용량 확인):
1. ⌘I (Product > Profile)
2. **Allocations** 템플릿
3. 각 탭에서 이미지 로드
4. 메모리 그래프 비교

**Time Profiler** (성능 분석):
1. ⌘I (Product > Profile)
2. **Time Profiler** 템플릿
3. 비교 탭에서 벤치마크
4. 각 라이브러리의 CPU 사용 시간 확인

**Network** (트래픽 분석):
1. ⌘I (Product > Profile)
2. **Network** 템플릿
3. 이미지 로딩 실행
4. 각 라이브러리의 다운로드 패턴 비교

---

### 3. 콘솔 로그 활용

Console.app에서 상세 로그 확인:

1. Console.app 실행
2. 시뮬레이터/기기 선택
3. 필터 입력: `subsystem:com.study.day09`
4. 앱 실행
5. 로그 확인:
   ```
   [SDWebImage] 로딩 시작: https://picsum.photos/800/600?random=1
   [SDWebImage] 캐시 미스
   [SDWebImage] 다운로드 완료: 487ms
   
   [Kingfisher] 로딩 시작: https://picsum.photos/800/600?random=1
   [Kingfisher] 캐시 히트
   [Kingfisher] 로딩 완료: 8ms
   ```

---

### 4. 실제 프로젝트 적용 가이드

**선택 기준 체크리스트**:

```
SDWebImage:
□ UIKit 앱인가?
□ Objective-C 코드와 혼용하는가?
□ 레거시 프로젝트인가?
□ 커뮤니티 지원이 중요한가?
→ YES가 많으면 SDWebImage

Kingfisher:
□ Swift/SwiftUI 앱인가?
□ 코드 가독성이 중요한가?
□ 팀 협업이 많은가?
□ 빠른 개발이 필요한가?
→ YES가 많으면 Kingfisher

Nuke:
□ 성능이 핵심인가?
□ 대용량 이미지를 다루는가?
□ 메모리가 제한적인가?
□ 고급 커스터마이징이 필요한가?
→ YES가 많으면 Nuke
```

---

## 🎯 학습 목표 달성 체크

### 기본 (필수)

- [ ] SDWebImage 기본 사용법 숙지
- [ ] Kingfisher 기본 사용법 숙지
- [ ] Nuke 기본 사용법 숙지
- [ ] 각 라이브러리 API 차이 이해
- [ ] 캐싱 동작 원리 이해

### 응용

- [ ] 성능 차이 직접 측정
- [ ] 메모리 사용량 비교 분석
- [ ] 디스크 캐시 효율 비교
- [ ] 이미지 변환 성능 비교
- [ ] 자신의 프로젝트에 적용할 라이브러리 결정

### 심화 (선택)

- [ ] 각 라이브러리 아키텍처 이해
- [ ] 캐싱 전략 차이 분석
- [ ] Instruments로 심화 분석
- [ ] 커스터마이징 기법 학습
- [ ] 실제 프로젝트에 적용

---

## 📚 다음 단계

Day 9를 완료했다면:

### 1. 실전 적용

**자신의 앱에 적용**:
- 선택한 라이브러리 도입
- 성능 개선 확인
- 사용자 경험 향상 측정

### 2. 고급 기능

**SDWebImage**:
- 커스텀 Coder 구현
- Transformer 체인
- 애니메이션 GIF 지원

**Kingfisher**:
- 커스텀 ImageProcessor
- ImagePrefetcher 활용
- 캐시 정책 커스터마이징

**Nuke**:
- 커스텀 ImagePipeline
- Request Priority 관리
- 고급 프리로딩 전략

### 3. 최적화

**성능 최적화**:
- 배치 로딩
- 점진적 이미지 표시
- 스크롤 성능 개선

**메모리 최적화**:
- 캐시 크기 조정
- 메모리 경고 대응
- 다운샘플링 적용

---

## 📞 참고 자료

### 프로젝트 문서

- **README.md**: 전체 개요
- **SDWEBIMAGE_GUIDE.md**: SDWebImage 상세
- **KINGFISHER_GUIDE.md**: Kingfisher 상세
- **NUKE_GUIDE.md**: Nuke 상세
- **LIBRARY_COMPARISON.md**: 비교 분석
- **PERFORMANCE_ANALYSIS.md**: 성능 분석

### 공식 GitHub

- [SDWebImage](https://github.com/SDWebImage/SDWebImage)
- [Kingfisher](https://github.com/onevcat/Kingfisher)
- [Nuke](https://github.com/kean/Nuke)

### 블로그/아티클

- [iOS Image Loading 비교 (Alex Grebenyuk)](https://kean.blog/post/nuke-9)
- [Kingfisher vs SDWebImage](https://onevcat.com/2015/11/kf-and-sdimage/)

---

**즐거운 학습 되세요! 🎉**

*세 라이브러리를 직접 비교하며 최적의 선택을 하세요!*

